
<!doctype html>
<html lang="en">

	<head>
	    <meta charset="UTF-8">
	    <link rel='icon' href='https://webp.svsu.edu/~gpcorser/images/cis255logo.png' type='image/png' />
	    <title>Prog04 - Joshua Mercier(jmmerci1)</title>
	    <link rel="stylesheet" type="text/css" href="prog04.css">
	</head>

	<body onload="addForm();">
    		<h1>Prog04- Joshua Mercier (jmmerci1)</h1>
    
		<button type="button" onclick="addLine();">Add Line</button>
		<br />
		<br />
		
		<div id="inputSection">
		</div>
		
		<button type="button" onclick="genObjectArray();">Generate and Display Array of Objects</button>
		<br />
		
		<div id="div2">
		</div>
		
		<button type="button" onclick="">Generate and Display Table</button>
		<br />
		<br />
		
		<div id="div3">
		</div>
		<script>
		
			// GLOBAL VARIABLES

			var currentLine = 0;
			var inputWidth  = 10;
			var objArray    = [];

			// FUNCTIONS

			/* addForm()
			 * appends an entry form to an HTML element with id="inputSection"
			 */
			function addForm() {
			  // precondition: HTML must contain <div id="inputSection"> element

			  // create a new form element, and append to inputSection
			  var newelement = document.createElement("form");
			  newelement.setAttribute("id","form1");
			  var inputSection = document.getElementById("inputSection");
			  inputSection.appendChild(newelement);

			  // create a new fieldset element, and append to form1
			  var newelement = document.createElement("fieldset");
			  newelement.setAttribute("id","fieldset1");
			  var form1 = document.getElementById("form1");
			  form1.appendChild(newelement);

			  // create a new legend element, and append to fieldset1
			  var newelement = document.createElement("legend");
			  var textnode = document.createTextNode("People ");
			  newelement.appendChild(textnode);
			  var fieldset1 = document.getElementById("fieldset1");
			  fieldset1.appendChild(newelement);

			  // creates first line for the form
              		  addLine();
			}

			/* addLine()
			 * inserts all labels and input elements for one row of a form
			 */
			function addLine () {
			  // precondition: inputWidth global variable must be set
			  // precondition: call from addForm() so HTML element with id="fieldset1" exists

			  addField("fieldset1", "gname", "Given Name:", "text", "Jane", inputWidth);
			  addField("fieldset1", "sname", "Surname:", "text", "Doe", inputWidth);
			  addMinMaxField("fieldset1", "bday", "Solar Birth Day:", "number", 1, 31, "1", inputWidth);
			  addMinMaxField("fieldset1", "bmonth", "Solar Birth Month:", "number", 1, 12, "1", inputWidth);
			  addMinMaxField("fieldset1", "byear", "Solar Birth Year:", "number", 1900, 2018, "1900", inputWidth);
			  //addField("fieldset1", "country", "Country:", "text", "USA", inputWidth);
			  addCountryDbx("fieldset1", "country", "Country:", "USA", "China");
			  var newelement = document.createElement("br");
			  var fieldset1 = document.getElementById("fieldset1");
			  fieldset1.appendChild(newelement);
			  currentLine++;
			}

			/* addField()
			 * inserts one label one input element into a row of a form 
			 */
			function addField(formId, namePrefix, labelText, dataType, placeholder, fieldSize) {
			  // precondition: currentLine (global variable) must be set
			  // precondition: objArray[] (global variable) must be declared
			  // precondition: call from addLine() so HTML element with id=formID exists

			  // create a new label element, and append to form (or fieldset)
			  var n = document.createElement("label");
			  n.setAttribute("for",namePrefix+currentLine);
			  var t = document.createTextNode(labelText + " " );
			  n.appendChild(t);
			  var f = document.getElementById(formId);
			  f.appendChild(n);

			  // create a new input element, and append to form
			  var n = document.createElement("input");
			  n.setAttribute("name",namePrefix+currentLine);
			  n.setAttribute("id",namePrefix+currentLine);
			  n.setAttribute("type",dataType);
			  n.setAttribute("placeholder",placeholder);
			  n.setAttribute("size",fieldSize);
			  var f = document.getElementById(formId);
			  f.appendChild(n);
			}
			// Function to have min and max values for bday, bmonth, byear
			function addMinMaxField(formId, namePrefix, labelText, dataType, min, max, placeholder, fieldSize) {
			  // precondition: currentLine (global variable) must be set
			  // precondition: objArray[] (global variable) must be declared
			  // precondition: call from addLineMinMax() so HTML element with id=formID exists

			  // create a new label element, and append to form (or fieldset)
			  var n = document.createElement("label");
			  n.setAttribute("for",namePrefix+currentLine);
			  var t = document.createTextNode(labelText + " " );
			  n.appendChild(t);
			  var f = document.getElementById(formId);
			  f.appendChild(n);

			  // create a new input element, and append to form
			  var n = document.createElement("input");
			  n.setAttribute("name",namePrefix+currentLine);
			  n.setAttribute("id",namePrefix+currentLine);
			  n.setAttribute("type",dataType);
			  n.setAttribute("min",min);
			  n.setAttribute("max",max);
			  n.setAttribute("placeholder",placeholder);
			  n.setAttribute("size",fieldSize);
			  var f = document.getElementById(formId);
			  f.appendChild(n);
			}
			// Function for country dropdown box of USA and CHINA
			function addCountryDbx(formId, namePrefix, labelText, country1, country2){
			  var n = document.createElement("label");
			  n.setAttribute("for",namePrefix+currentLine);
			  var t = document.createTextNode(labelText + " " );
			  n.appendChild(t);
			  var f = document.getElementById(formId);
			  f.appendChild(n);
			  
			  var n = document.createElement("select");
			  n.setAttribute("id",namePrefix+currentLine);
			  var o1 = document.createElement("option")
			  o1.setAttribute("value", country1);
             		  o1.appendChild(document.createTextNode(country1));
              		  n.appendChild(o1);
			  var o2 = document.createElement("option")
			  o2.setAttribute("value", country2);
              		  o2.appendChild(document.createTextNode(country2));
			  n.appendChild(o2);
			  document.getElementById(formId).appendChild(n);
			
			}

			/* genObjectArray()
			 * generates content for an array of objects, 
			 * where each element of the array 
			 * is an object containing the data entered in one line of the form 
			 */
			function genObjectArray() {
			  // precondition: HTML must contain <div id="div2"> element
			  // precondition: currentLine (global variable) must be set

			  // generate objArray from HTML form elements
			  for(i = 0; i < currentLine; i++) {
			    objArray[i] = {
			      'gname'     :document.getElementById("gname"+i).value,
			      'sname'     :document.getElementById("sname"+i).value,
			      'bday'      :parseInt(document.getElementById("bday"+i).value)?parseInt(document.getElementById("bday"+i).value):0,
				  'bmonth'    :parseInt(document.getElementById("bmonth"+i).value)?parseInt(document.getElementById("bmonth"+i).value):0,
				  'byear'     :parseInt(document.getElementById("byear"+i).value)?parseInt(document.getElementById("byear"+i).value):0, 
			      'country'   :document.getElementById("country"+i).value,
			      'countryAge':function () {
				if('China'==this.country)
				  return parseInt(this.age)+1; 
				else 
				  return parseInt(this.age);
				}
			    };
			  }

			  // display objArray
			  var divContent = "<ol start='0'>";
			  objArray.forEach(function(e) {
			    divContent += '<li>';
			    divContent += JSON.stringify(e);
			    divContent += ' ... countryAge() == ' + e.countryAge();
			    divContent += '</li>';
			  });
			  divContent += "</ol>";
			  document.getElementById("div2").innerHTML = divContent;
			}

			/* genTable()
			 * generates an HTML table containing localized output from 
			 */

		</script>	
	</body>
</html>


